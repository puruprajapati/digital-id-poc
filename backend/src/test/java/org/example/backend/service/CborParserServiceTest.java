package org.example.backend.service;

import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.jupiter.api.Test;

public class CborParserServiceTest {

  @Test
  public void testParseMdocFromGoogleWallet() throws Exception {
    String vpTokenData = "o2d2ZXJzaW9uYzEuMGlkb2N1bWVudHOBo2dkb2NUeXBleBpjb20uZ29vZ2xlLndhbGxldC5pZGNhcmQuMWxpc3N1ZXJTaWduZWSiam5hbWVTcGFjZXOhcW9yZy5pc28uMTgwMTMuNS4xgdgYWFGkaGRpZ2VzdElEGRYXZnJhbmRvbVAc34My8E5oavkbN5IU8gh2cQVsZW1lbnRJZGVudGlmaWVya2FnZV9vdmVyXzE4bGVsZW1lbnRWYWx1ZfVqaXNzdWVyQXV0aIRDoQEmoRghWQOCMIIDfjCCAwWgAwIBAgIUAP3Fw7vk2neSqyelxTlGFHQiOD8wCgYIKoZIzj0EAwMwXTELMAkGA1UEBhMCWloxEzARBgNVBAoTCkdvb2dsZSBMTEMxDzANBgNVBAsTBldhbGxldDEoMCYGA1UEAxMfVEVTVCBVU0UgT05MWSBHSUNJIFN0YWdpbmcgUm9vdDAeFw0yNTA0MDMxOTIwNDJaFw0yNjA0MDMxOTIwNDFaMFsxCzAJBgNVBAYTAlpaMRMwEQYDVQQKEwpHb29nbGUgTExDMQ8wDQYDVQQLEwZXYWxsZXQxJjAkBgNVBAMTHVRFU1QgVVNFIE9OTFkgR0lDSSBTdGFnaW5nIERTMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAERQp3Ju9XGyA_EjQ4nYLph4RUo27uNRndpG7simAEgbU4HcbPaFSR0Hqmsd1Avr_d6iY40p1yDf4BbhUBusJ1waOCAaMwggGfMA4GA1UdDwEB_wQEAwIHgDAdBgNVHQ4EFgQUOdmZIeXV3tFajB81wve85ReGAvAwHwYDVR0jBBgwFoAUlIFEqHatmpcZLEbMRQDzXWwgHRgwgY0GCCsGAQUFBwEBBIGAMH4wfAYIKwYBBQUHMAKGcGh0dHA6Ly9wcml2YXRlY2EtY29udGVudC02ODA1MTA5YS0wMDAwLTIzZGEtODRiNC1kNGY1NDdlYzZkNjAuc3RvcmFnZS5nb29nbGVhcGlzLmNvbS83Mzc2MDA0MzI5NmMxYjY3YzBjNi9jYS5jcnQwgYIGA1UdHwR7MHkwd6B1oHOGcWh0dHA6Ly9wcml2YXRlY2EtY29udGVudC02ODA1MTA5YS0wMDAwLTIzZGEtODRiNC1kNGY1NDdlYzZkNjAuc3RvcmFnZS5nb29nbGVhcGlzLmNvbS83Mzc2MDA0MzI5NmMxYjY3YzBjNi9jcmwuY3JsMCEGA1UdEgQaMBiGFmh0dHBzOi8vd3d3Lmdvb2dsZS5jb20wFQYDVR0lAQH_BAswCQYHKIGMXQUBAjAKBggqhkjOPQQDAwNnADBkAjADj92cSafV32YlMV2sLDM3b81YyZ5oqCQYCCdjctY7kMbE85aayAED8n0CO2q2N3UCMDShc3ztZLTj3ZSALf0bcyNEPi6TYn0NhvxHKHkutmgPTFIbvw29Csy7uEjPN4htKFkDoNgYWQObpmd2ZXJzaW9uYzEuMG9kaWdlc3RBbGdvcml0aG1nU0hBLTI1Nmx2YWx1ZURpZ2VzdHOjcW9yZy5pc28uMTgwMTMuNS4xrRkWF1ggWIcB1FowykRif5F9oCg0Y3qfYYHzxAOIPOKh8EV8LhwZMwpYIDNEjhDUVLj3fvSS4PbM7QK4-1SfdxNpKv9Cy24ULFvsGUHaWCCDOQuwVJlIHOvkvENkDfM_ZNZbKpNZrOQBWsKn8Ggl6BlQPlggRjV36gkryFnq2WaTJZtnSB3O3PzGJ45gvFSmGaxJ9N0ZbwtYIKhv9jZO6V3TVl55z9LKeAjRXiPGpF7_9YDVjPV5i1acGaWFWCB1qnHNhUKsz0kpQMCPE9MLSbnBRlcpf0wz4K9EOP2r6xmr1VggsCOGeTeZAn7lzO0sMqyDq2JE9Weg8FF49q4dbpPwMX8Zui1YIEL9l-pkE39Ej-8Bnib63kDdYDJzSB2SYQsnoqkHlFENGb6MWCDweNY6PjD2sYEqRvWkLhVk0LdlX6goqCnbrnQINFrWNhnCdVgg0ONrXQsJ0_m1rAxaue6rmhuDYBe77BB-VGQHQmV_jGkZyelYIDS08Pu-_ese9-jBQc3TnmMghsPgq12V-IO54uwGTDF9Gdz5WCDb2gf4zQM1eMfI7Q5CnG5Lz2Tu7R1E9P8JClDQ2cVuOBn0JlggzdSUUkefSy9XrqasM8xvwbQUqdsW9z9QNBq3iUjx-5B4GmNvbS5nb29nbGUud2FsbGV0LmlkY2FyZC4xoRmOw1ggNzUkmPtxtkKrMuAORGX_hefl5wGwBQT8-zKDrZZJN0R3b3JnLmlzby4xODAxMy41LjEuYWFtdmGhGYPxWCCGxa5R1ipgwzwLGZFqassTlNapzdJI_fZjUg0qXLSCbW1kZXZpY2VLZXlJbmZvoWlkZXZpY2VLZXmkAQIgASFYIJq1AvRB2-Q2alxWLkWnukqH-SNjM7oqi8qHFq43_pi8IlggUOjq7NVkvZwsXdgO8_YANGdqt861u2VcHrok5QQLnvZnZG9jVHlwZXgaY29tLmdvb2dsZS53YWxsZXQuaWRjYXJkLjFsdmFsaWRpdHlJbmZvo2ZzaWduZWTAdDIwMjUtMTItMTBUMTc6MDM6MDhaaXZhbGlkRnJvbcB0MjAyNS0xMi0xMFQxNzowMzowOFpqdmFsaWRVbnRpbMB0MjAyNS0xMi0yNFQxNzowMzowOFpYQKONJba7vV3LI9sNOfm41NSjYUtQCxHCU-tOxzp-J9j3h0p9CQmbBCktpdJYfCBtlZ63xKHwekgqwDn2WcDmTiZsZGV2aWNlU2lnbmVkompuYW1lU3BhY2Vz2BhBoGpkZXZpY2VBdXRooW9kZXZpY2VTaWduYXR1cmWEQ6EBJqD2WECgDr3_Px0TGuBuzluG3l-9nCcGIB8WgdcmC-mTooh7p7oLFPgN5NgvHxLpPvOpkD3i9nzRxz_BrIj9lx4ez3NIZnN0YXR1cwA";

    CborParserService service = new CborParserService();
    CborParserService.MdocData data = service.parseMdocCbor(vpTokenData);

    System.out.println("Parsed result:");
    System.out.println("  docType: " + data.getDocType());
    System.out.println("  birthDate: " + data.getBirthDate());
    System.out.println("  givenName: " + data.getGivenName());
    System.out.println("  familyName: " + data.getFamilyName());
    System.out.println("  ageOver18: " + data.getAgeOver18());
    System.out.println("  ageOver21: " + data.getAgeOver21());
  }
}

